<!DOCTYPE html>
<html>

<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>README</title>


<style type="text/css">
body {
  font-family: Helvetica, arial, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  padding-top: 10px;
  padding-bottom: 10px;
  background-color: white;
  padding: 30px; }

body > *:first-child {
  margin-top: 0 !important; }
body > *:last-child {
  margin-bottom: 0 !important; }

a {
  color: #4183C4; }
a.absent {
  color: #cc0000; }
a.anchor {
  display: block;
  padding-left: 30px;
  margin-left: -30px;
  cursor: pointer;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0; }

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
  cursor: text;
  position: relative; }

h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;
  text-decoration: none; }

h1 tt, h1 code {
  font-size: inherit; }

h2 tt, h2 code {
  font-size: inherit; }

h3 tt, h3 code {
  font-size: inherit; }

h4 tt, h4 code {
  font-size: inherit; }

h5 tt, h5 code {
  font-size: inherit; }

h6 tt, h6 code {
  font-size: inherit; }

h1 {
  font-size: 28px;
  color: black; }

h2 {
  font-size: 24px;
  border-bottom: 1px solid #cccccc;
  color: black; }

h3 {
  font-size: 18px; }

h4 {
  font-size: 16px; }

h5 {
  font-size: 14px; }

h6 {
  color: #777777;
  font-size: 14px; }

p, blockquote, ul, ol, dl, li, table, pre {
  margin: 15px 0; }

hr {
  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;
  border: 0 none;
  color: #cccccc;
  height: 4px;
  padding: 0;
}

body > h2:first-child {
  margin-top: 0;
  padding-top: 0; }
body > h1:first-child {
  margin-top: 0;
  padding-top: 0; }
  body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
  margin-top: 0;
  padding-top: 0; }

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0; }

h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
  margin-top: 0; }

li p.first {
  display: inline-block; }
li {
  margin: 0; }
ul, ol {
  padding-left: 30px; }

ul :first-child, ol :first-child {
  margin-top: 0; }

dl {
  padding: 0; }
  dl dt {
    font-size: 14px;
    font-weight: bold;
    font-style: italic;
    padding: 0;
    margin: 15px 0 5px; }
    dl dt:first-child {
      padding: 0; }
    dl dt > :first-child {
      margin-top: 0; }
    dl dt > :last-child {
      margin-bottom: 0; }
  dl dd {
    margin: 0 0 15px;
    padding: 0 15px; }
    dl dd > :first-child {
      margin-top: 0; }
    dl dd > :last-child {
      margin-bottom: 0; }

blockquote {
  border-left: 4px solid #dddddd;
  padding: 0 15px;
  color: #777777; }
  blockquote > :first-child {
    margin-top: 0; }
  blockquote > :last-child {
    margin-bottom: 0; }

table {
  padding: 0;border-collapse: collapse; }
  table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0; }
    table tr:nth-child(2n) {
      background-color: #f8f8f8; }
    table tr th {
      font-weight: bold;
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr td {
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr th :first-child, table tr td :first-child {
      margin-top: 0; }
    table tr th :last-child, table tr td :last-child {
      margin-bottom: 0; }

img {
  max-width: 100%; }

span.frame {
  display: block;
  overflow: hidden; }
  span.frame > span {
    border: 1px solid #dddddd;
    display: block;
    float: left;
    overflow: hidden;
    margin: 13px 0 0;
    padding: 7px;
    width: auto; }
  span.frame span img {
    display: block;
    float: left; }
  span.frame span span {
    clear: both;
    color: #333333;
    display: block;
    padding: 5px 0 0; }
span.align-center {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-center > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: center; }
  span.align-center span img {
    margin: 0 auto;
    text-align: center; }
span.align-right {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-right > span {
    display: block;
    overflow: hidden;
    margin: 13px 0 0;
    text-align: right; }
  span.align-right span img {
    margin: 0;
    text-align: right; }
span.float-left {
  display: block;
  margin-right: 13px;
  overflow: hidden;
  float: left; }
  span.float-left span {
    margin: 13px 0 0; }
span.float-right {
  display: block;
  margin-left: 13px;
  overflow: hidden;
  float: right; }
  span.float-right > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: right; }

code, tt {
  margin: 0 2px;
  padding: 0 5px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px; }

pre code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent; }

.highlight pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }

pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }
  pre code, pre tt {
    background-color: transparent;
    border: none; }

sup {
    font-size: 0.83em;
    vertical-align: super;
    line-height: 0;
}

kbd {
  display: inline-block;
  padding: 3px 5px;
  font-size: 11px;
  line-height: 10px;
  color: #555;
  vertical-align: middle;
  background-color: #fcfcfc;
  border: solid 1px #ccc;
  border-bottom-color: #bbb;
  border-radius: 3px;
  box-shadow: inset 0 -1px 0 #bbb
}

* {
	-webkit-print-color-adjust: exact;
}
@media screen and (min-width: 914px) {
    body {
        width: 854px;
        margin:0 auto;
    }
}
@media print {
	table, pre {
		page-break-inside: avoid;
	}
	pre {
		word-wrap: break-word;
	}
}
</style>


<!-- link to mermaid css -->
<link rel="stylesheet" type="text/css" href="/Volumes/data/archive/tools/mermaid-macdown/mermaid.css">

</head>

<body>

<h4 id="toc_0">Final Report</h4>

<h4 id="toc_1">Mengdi Lin (ml3567)</h4>

<h2 id="toc_2">BTree Index HowTos</h2>

<h3 id="toc_3">To Compile To An Exectuable</h3>

<div><pre><code class="language-bash"># set your PAGE_SIZE in BTreePage.h
BTREE_SIZE=&lt;PAGE_SIZE in BTreepPage.h&gt;
make -j 2</code></pre></div>

<p>This should generate an executable with <code>test_&lt;#&gt;</code> where # corresponds to the page size </p>

<h3 id="toc_4">To Build A BTreeIndex With The Executable</h3>

<div><pre><code class="language-bash">./test_&lt;#&gt; -build &lt;path_to_idx&gt; &lt;path_to_index&gt; &amp;&gt; log</code></pre></div>

<h3 id="toc_5">To Perform Equality-Probe On Key With The Executable</h3>

<div><pre><code class="language-bash">#if we want to probe on a single key
./test_&lt;#&gt; -probe_key &lt;key&gt; &lt;index_file_path&gt; &lt;binary_data_file_path&gt;

#if we want to probe on a file of keys (file format must be the same as idx format)
./test_&lt;#&gt; -probe_file &lt;data_file_path&gt; &lt;index_file_path&gt; &lt;binary_data_file_path&gt;</code></pre></div>

<h3 id="toc_6">To Perform Range-Probe On Key With the Executable</h3>

<div><pre><code class="language-bash">#if we are searching for all keys x such that: x &gt;= key
./test_&lt;#&gt; -range_probe_key_gt &lt;key&gt; &lt;index_file_path&gt; &lt;binary_data_file_path&gt;

#if we are searching for all keys x such that: key &gt;= x
./test_&lt;#&gt; -range_probe_key_lt &lt;key&gt; &lt;index_file_path&gt; &lt;binary_data_file_path&gt;

#if we are searching for all keys x such that: start_key &lt;= x &lt;= end_key
./test_&lt;#&gt; -range_probe_key_endpts &lt;start_key&gt; &lt;end_key&gt; &lt;index_file_path&gt; &lt;binary_data_file_path&gt;</code></pre></div>

<h2 id="toc_7">BTreeIndex API Functions</h2>

<h3 id="toc_8">To Build Index</h3>

<div><pre><code class="language-cpp">BTreeIndex btree;
//dataIdxFilePath is a string representing the path of data idx file
vector&lt;DataEntry&gt; entries = btree.parse_idx_file(dataIdxFilePath); 
//build the tree in memory
btree.build_tree(entries);
//flush it to index file. indexFilePath is a string representing the path to index file
btree.flush(indexFilePath);</code></pre></div>

<h3 id="toc_9">To Perform Equality Probe On A Key</h3>

<div><pre><code class="language-cpp">BTreeIndex btree;
//key is uint64_t
//index_fd and data_bin_fd are file descriptors of index file and data.bin file
//result is a pair where the first item is a boolean indicating 
// whether key is found in index. second item is the rid of key, if key is found
auto result = btree.probe(key,index_fd, data_bin_fd);</code></pre></div>

<h3 id="toc_10">To Perform Range Probe On A Key</h3>

<div><pre><code class="language-cpp">//if we are searching for all keys x such that: x &gt;= key
//key is uint64_t
//index_fd and data_bin_fd are file descriptors of index file and data.bin file
//bin_file_size is the file size of data_bin_fd
auto result = btree.range_probe_gt(key, index_fd, data_bin_fd, bin_file_size);

//if we are searching for all keys x such that: key &gt;= x
auto result = btree.range_probe_lt(key, index_fd, data_bin_fd);

//if we are searching for all keys x such that: start_key &lt;= x &lt;= end_key
auto result = btree.range_probe_endpts(start_key, end_key, index_fd, data_bin_fd, bin_file_size);</code></pre></div>

<div style="page-break-after: always;"></div>

<h2 id="toc_11">BTreeIndex Architecture</h2>

<h3 id="toc_12">BTree Build Process</h3>

<p><img src="btree_architecture_diagram.svg" alt="Drawing" style="width: 500px; height:300px;"/>
<code>BTreeIndex</code> takes an <code>idx file</code>, passes it to <code>BTreeIndex::parse_idx_file</code> which parses the file and returns a <code>vector&lt;DataEntry&gt;</code>. <code>BTreeIndex::build_tree</code> takes the vector and builds a tree in memory. <code>BTreeIndex::flush</code> flushes the tree onto a file.</p>

<h3 id="toc_13">BTree Probe Process</h3>

<p><img src="btree_architecture_probe.svg" alt="Drawing" style="width: 500px; height:300px;"/>
<code>BTreeIndex</code> takes <code>key</code> and <code>indexFile</code> file descriptor for an equality probe and passes them to <code>BTreeIndex::probe</code> which does a probe on the Btree and returns the <code>rid</code> found at the leaf node that corresponds to the <code>key</code>. Then, it calls <code>BTreeIndex::probe_bin</code> with <code>rid</code> as parameter to probe <code>data.bin</code> file to find the actual offset of the key in <code>data.bin</code>. Range probes follow similar design as equality probe.</p>

<h2 id="toc_14">BTreeIndex Experiments</h2>

<h3 id="toc_15">Background</h3>

<p>2 sets of experiments were performed with 2 data sets in /dev/shm/genome/probes (both 0/ and 1/). Btree indicies were built from the 2 data sets (0/ and 1/) in /dev/shm/genome/probes and probed using random min hashes provided in  /dev/shm/genome/probes. Codes for building and probing for btree indices are built with -O4 optimization turned on.</p>

<h3 id="toc_16">Size of Btree Index</h3>

<h4 id="toc_17">running on data in /dev/shm/genome/probes/0</h4>

<table>
<thead>
<tr>
<th style="text-align: right">page size</th>
<th style="text-align: right">btree index size</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">43.0 MB</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">54.43 MB</td>
</tr>
<tr>
<td style="text-align: right">2048</td>
<td style="text-align: right">42.33 MB</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">47.41 MB</td>
</tr>
<tr>
<td style="text-align: right">4096</td>
<td style="text-align: right">42.0 MB</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">44.4 MB</td>
</tr>
</tbody>
</table>

<h4 id="toc_18">running on data in /dev/shm/genome/probes/1</h4>

<table>
<thead>
<tr>
<th style="text-align: right">page size</th>
<th style="text-align: right">btree index size</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">44.12 MB</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">55.83 MB</td>
</tr>
<tr>
<td style="text-align: right">2048</td>
<td style="text-align: right">43.43 MB</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">48.64 MB</td>
</tr>
<tr>
<td style="text-align: right">4096</td>
<td style="text-align: right">43.09 MB</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">45.55 MB</td>
</tr>
</tbody>
</table>

<h3 id="toc_19">BTree Index Build Time</h3>

<p>This is the total time the bulkloading algorithm takes to create a btree index. Note that not all entries in data.idx are in the leaf nodes of the btree index. Instead, btree index only stores keys whose rids are every 4K apart in its leaf. Thus, btree index size is significantly smaller than hash index. </p>

<h4 id="toc_20">running on data in /dev/shm/genome/probes/0</h4>

<table>
<thead>
<tr>
<th style="text-align: right">page size</th>
<th style="text-align: right">build time (microseconds)</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">288276.0</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">674109.0</td>
</tr>
<tr>
<td style="text-align: right">2048</td>
<td style="text-align: right">262092.0</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">454288.0</td>
</tr>
<tr>
<td style="text-align: right">4096</td>
<td style="text-align: right">248702.0</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">346141.0</td>
</tr>
</tbody>
</table>

<h4 id="toc_21">running on data in /dev/shm/genome/probes/1</h4>

<table>
<thead>
<tr>
<th style="text-align: right">page size</th>
<th style="text-align: right">build time (microseconds)</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">294377.0</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">739542.0</td>
</tr>
<tr>
<td style="text-align: right">2048</td>
<td style="text-align: right">291138.0</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">463576.0</td>
</tr>
<tr>
<td style="text-align: right">4096</td>
<td style="text-align: right">261638.0</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">355268.0</td>
</tr>
</tbody>
</table>

<h3 id="toc_22">Performance of Btree Index Probe On Single Key</h3>

<p>To measure the performance of a equality probe on a single key, I ran 581223607 random probes using the probe file provided in /dev/shm/genome/probes/0 and then took the average of the total time the index had taken to perform 581223607 random probes.</p>

<h4 id="toc_23">running on data in /dev/shm/genome/probes/0</h4>

<table>
<thead>
<tr>
<th style="text-align: right">page size</th>
<th style="text-align: right">number of probes</th>
<th style="text-align: right">avg microsecond per probe</th>
<th style="text-align: right">successful probe</th>
<th style="text-align: right">unsuccessful probe</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">10</td>
<td style="text-align: right">581018721</td>
<td style="text-align: right">204886</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">13</td>
<td style="text-align: right">581018721</td>
<td style="text-align: right">204886</td>
</tr>
<tr>
<td style="text-align: right">2048</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">10</td>
<td style="text-align: right">581018721</td>
<td style="text-align: right">204886</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">11</td>
<td style="text-align: right">581018721</td>
<td style="text-align: right">204886</td>
</tr>
<tr>
<td style="text-align: right">4096</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">9</td>
<td style="text-align: right">581018721</td>
<td style="text-align: right">204886</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">10</td>
<td style="text-align: right">581018721</td>
<td style="text-align: right">204886</td>
</tr>
</tbody>
</table>

<h4 id="toc_24">running on data in /dev/shm/genome/probes/1</h4>

<table>
<thead>
<tr>
<th style="text-align: right">page size</th>
<th style="text-align: right">number of probes</th>
<th style="text-align: right">avg microsecond per probe</th>
<th style="text-align: right">successful probe</th>
<th style="text-align: right">unsuccessful probe</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">12</td>
<td style="text-align: right">521002767</td>
<td style="text-align: right">60220840</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">16</td>
<td style="text-align: right">521002767</td>
<td style="text-align: right">60220840</td>
</tr>
<tr>
<td style="text-align: right">2048</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">11</td>
<td style="text-align: right">521002767</td>
<td style="text-align: right">60220840</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">12</td>
<td style="text-align: right">521002767</td>
<td style="text-align: right">60220840</td>
</tr>
<tr>
<td style="text-align: right">4096</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">11</td>
<td style="text-align: right">521002767</td>
<td style="text-align: right">60220840</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">13</td>
<td style="text-align: right">521002767</td>
<td style="text-align: right">60220840</td>
</tr>
</tbody>
</table>

<p>For a btree index, the larger the page size, the faster the probe since a large page size also indicates a shorter tree (fewer traversals to get to the leaf level). I noticed that btree indices take slightly longer when probing on the second data set which have a significantly higher number of unsuccessful probes. This can be explained by the implementation of the probe. For a btree probe, after it has reached the child node, the probe algorithm has to open data.bin and does a linear scan from a specific offset, looking for the key. If the key is not in data.bin, then the algorithm will keep reading until it has read 4096B. On the other hand, if the key is in data.bin, the algorithm will most likely terminate early before it finishes reading 4096B.</p>

<h3 id="toc_25">Performance of BTree Index Range Probe</h3>

<p>To measure the performance of range probe, I generated an input file with 10000 rows using <code>generate_range_sample_for_test</code> in <code>test.cpp</code>. Within each row, there is a start key, an end key, and the number of keys inbetween start and end keys (which is 1000). start keys are in random order (obtained from /dev/shm/genome/probes/0/probes.idx). When I ran the experiment, I probed on start and end keys until the end of input file.</p>

<h4 id="toc_26">running on data in /dev/shm/genome/probes/0</h4>

<table>
<thead>
<tr>
<th style="text-align: right">page size</th>
<th style="text-align: right">number of probes</th>
<th style="text-align: right">result size (number of keys, rids)</th>
<th style="text-align: right">avg microsecond per probe</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">10000</td>
<td style="text-align: right">1000</td>
<td style="text-align: right">64</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">10000</td>
<td style="text-align: right">1000</td>
<td style="text-align: right">70</td>
</tr>
<tr>
<td style="text-align: right">2048</td>
<td style="text-align: right">10000</td>
<td style="text-align: right">1000</td>
<td style="text-align: right">67</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">10000</td>
<td style="text-align: right">1000</td>
<td style="text-align: right">68</td>
</tr>
<tr>
<td style="text-align: right">4096</td>
<td style="text-align: right">10000</td>
<td style="text-align: right">1000</td>
<td style="text-align: right">67</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">10000</td>
<td style="text-align: right">1000</td>
<td style="text-align: right">69</td>
</tr>
</tbody>
</table>

<h4 id="toc_27">running on data in /dev/shm/genome/probes/1</h4>

<table>
<thead>
<tr>
<th style="text-align: right">page size</th>
<th style="text-align: right">number of probes</th>
<th style="text-align: right">result size (number of keys, rids)</th>
<th style="text-align: right">avg microsecond per probe</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">10000</td>
<td style="text-align: right">1000</td>
<td style="text-align: right">64</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">10000</td>
<td style="text-align: right">1000</td>
<td style="text-align: right">72</td>
</tr>
<tr>
<td style="text-align: right">2048</td>
<td style="text-align: right">10000</td>
<td style="text-align: right">1000</td>
<td style="text-align: right">72</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">10000</td>
<td style="text-align: right">1000</td>
<td style="text-align: right">73</td>
</tr>
<tr>
<td style="text-align: right">4096</td>
<td style="text-align: right">10000</td>
<td style="text-align: right">1000</td>
<td style="text-align: right">70</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">10000</td>
<td style="text-align: right">1000</td>
<td style="text-align: right">71</td>
</tr>
</tbody>
</table>

<h2 id="toc_28">HashIndex HowTos</h2>

<h3 id="toc_29">To Compile To An Exectuable</h3>

<div><pre><code class="language-bash"># set your PAGE_SIZE in Page.h
HASH_SIZE=&lt;PAGE_SIZE in Page.h&gt;
make -j 2</code></pre></div>

<p>This should generate an executable with <code>hash_test_&lt;#&gt;</code> where # corresponds to the page size </p>

<h3 id="toc_30">To Build A Hash Index With The Executable</h3>

<div><pre><code class="language-bash">./hash_test_&lt;#&gt; -build &lt;path_to_idx&gt; &lt;path_to_index&gt; &lt;load_capacity&gt; &amp;&gt; log</code></pre></div>

<h3 id="toc_31">To Perform Equality-Probe On Key With The Executable</h3>

<div><pre><code class="language-bash">#if we want to probe on a single key
./test_&lt;#&gt; -probe_key &lt;key&gt; &lt;path_to_index&gt; &lt;load_capacity&gt; &amp;&gt; log

#if we want to probe on a file of keys (file format must be the same as idx format)
./test_&lt;#&gt; -probe_file &lt;path_to_idx&gt; &lt;path_to_index&gt; &lt;load_capacity&gt; &amp;&gt; log</code></pre></div>

<h2 id="toc_32">HashIndex API Functions</h2>

<h3 id="toc_33">To Build Index</h3>

<div><pre><code class="language-cpp">//load_capacity is a float in the range of (0,1]
HashIndex index(load_capacity);
//dataFilePath is the idx file path
//indexFileName is the path to output index file
index.build_index(dataFilePath, indexFileName);</code></pre></div>

<h3 id="toc_34">To Perform Equality Probe On A Key</h3>

<div><pre><code class="language-cpp">//load_capacity is a float in the range of (0,1]
HashIndex index(load_capacity);
//index_fd is the file descriptor of index file
pair&lt;bool,uint64_t&gt; t_result = index.search(key, index_fd);</code></pre></div>

<h2 id="toc_35">HashIndex Architecture</h2>

<h3 id="toc_36">Hash Index Build Process</h3>

<p><img src="hash_architecture_build.svg" alt="Drawing" style="width: 500px; height:400px;"/>
<code>HashIndex</code> takes <code>idx_path</code> and <code>indexFilePath</code>, and passes them to <code>HashIndex::build_index</code>. </p>

<p><code>build_index</code> has 5 steps.</p>

<div><pre><code class="language-none">1. Parses idx file into a vector of DataEntry
2. hash each key in DataEntry to number corresponding to a bucket
3. partition keys based on their hash into a bucket
4. merge empty primary buckets with overflow pages
5. flush</code></pre></div>

<div style="page-break-after: always;"></div>

<h3 id="toc_37">Hash Index Probe Process</h3>

<p><img src="hash_architecture_probe.svg" alt="Drawing" style="width: 500px; height:400px;"/>
<code>HashIndex</code> takes <code>key</code> and <code>index_fd</code>, and passes them to <code>HashIndex::search</code>. 
<code>search</code> has 3 steps.</p>

<div><pre><code class="language-none">1. read page from current offset in index
2. if search key is larger than the largest key in current page, go to overflow page. Else, perform a binary search on the current page to get key.
3. return rid</code></pre></div>

<div style="page-break-after: always;"></div>

<h2 id="toc_38">HashIndex Experiments</h2>

<h3 id="toc_39">Background</h3>

<p>3 sets of experiments were performed with 3 data sets in /dev/shm/genome/probes. Hash indicies were built from the 3 data sets in /dev/shm/genome/probes and probed using random min hashes provided in  /dev/shm/genome/probes. Codes for building and probing for btree indices are built with -O4 optimization turned on. All experiments are ran on Ingatan.</p>

<h3 id="toc_40">Hash Distribution Plots For Data In /dev/shm/genome/probes/0</h3>

<p>Graphs below represent the distribution of keys per page in a hash index with a specific page size and load capacity. The distributions of hashed keys exhibit a normal curve, centering around <code>(PAGE_SIZE/16B)*load_capacity</code> (number of entries per page if entries are evenly distributed). The red curve is the distribution before <code>merge</code> algorithm tries to find empty hash buckets to merge with overflow pages. The green curve is the distribution after <code>merge</code> algorithm has been applied and empty primary buckets have been merged with overflow pages. <code>merge</code> algorithm does nothing for page sizes &gt;= 1024B. For smaller page sizes, <code>merge</code> algorithm has collapsed the two ends of the distribution such that the ends are flatter and more points are concentrated around the median.</p>

<div class="image123">
    <div style="display:inline-block;">
        <img src="./probe0/hash/70/64_70_hash_dist.png" height="300px"/>
    </div>
    <div style="display:inline-block;">
        <img src="./probe0/hash/70/128_70_hash_dist.png" height="300px"/>
    </div>
    <div style="display:inline-block;">
         <img src="./probe0/hash/70/256_70_hash_dist.png" height="300px"/>
    </div>
    <div style="display:inline-block;">
         <img src="./probe0/hash/70/512_70_hash_dist.png" height="300px"/>
    </div>
    <div style="display:inline-block;">
         <img src="./probe0/hash/70/1024_70_hash_dist.png" height="300px"/>
    </div>
     <div style="display:inline-block;">
         <img src="./probe0/hash/70/2048_70_hash_dist.png" height="300px"/>
    </div>
    <div style="display:inline-block;">
         <img src="./probe0/hash/70/4096_70_hash_dist.png" height="300px"/>
    </div>
    <div style="display:inline-block;">
        <img src="./probe0/hash/80/64_80.png" height="300px"/>
    </div>
    <div style="display:inline-block;">
        <img src="./probe0/hash/80/128_80.png" height="300px"/>
    </div>
    <div style="display:inline-block;">
         <img src="./probe0/hash/80/256_80.png" height="300px"/>
    </div>
    <div style="display:inline-block;">
         <img src="./probe0/hash/80/512_80.png" height="300px"/>
    </div>
    <div style="display:inline-block;">
         <img src="./probe0/hash/80/1024_80.png" height="300px"/>
    </div>
     <div style="display:inline-block;">
         <img src="./probe0/hash/80/2048_80.png" height="300px"/>
    </div>
    <div style="display:inline-block;">
         <img src="./probe0/hash/80/4096_80.png" height="300px"/>
    </div>
</div>

<h3 id="toc_41">Codes For Generating Graphs</h3>

<div><pre><code class="language-bash">python clean_log.py &lt;build log&gt; &lt;before merge log&gt; &lt;after merge log&gt;
gnuplot
&gt;set term png  
&gt;set output &quot;64_80.png&quot;
&gt;set xlabel &quot;Num Keys&quot;
&gt;set ylabel &quot;Num Pages With Num Keys&quot;
&gt;plot &quot;64_80_before_merge&quot; using 1:2 title &quot;before merge&quot;, &quot;64_80_after_merge&quot; using 1:2 title &quot;after merge&quot;
&gt;plot &quot;4096_80_before_merge&quot; using 1:2 title &quot;Num Pages With Num Key (before merge)&quot;, &quot;4096_70_hash_after_merge&quot; using 1:2 title &quot;Num Pages With Num Key (after merge)&quot;</code></pre></div>

<h3 id="toc_42">Size of Hash Index</h3>

<p>In general, the larger the page size and the higher the load capacity, the smaller the index size. The smallest index comes from index with page size 4096B and 100% load capacity. Increasing the page size reduces the size of the index more significantly for page sizes &lt;= 1048B whereas for indices with page size &gt; 1048B, increasing the page size only reduces the index size with a small amount.</p>

<h4 id="toc_43">running on data in /dev/shm/genome/probes/0</h4>

<table>
<thead>
<tr>
<th style="text-align: right">page size (bytes)</th>
<th style="text-align: right">load capacity</th>
<th style="text-align: right">file size</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">100</td>
<td style="text-align: right">1.75 GB</td>
</tr>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">70</td>
<td style="text-align: right">2.49 GB</td>
</tr>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">80</td>
<td style="text-align: right">2.17 GB</td>
</tr>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">90</td>
<td style="text-align: right">1.93 GB</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">100</td>
<td style="text-align: right">2.0 GB</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">70</td>
<td style="text-align: right">2.8 GB</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">80</td>
<td style="text-align: right">2.45 GB</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">90</td>
<td style="text-align: right">2.19 GB</td>
</tr>
<tr>
<td style="text-align: right">2048</td>
<td style="text-align: right">100</td>
<td style="text-align: right">1.74 GB</td>
</tr>
<tr>
<td style="text-align: right">2048</td>
<td style="text-align: right">70</td>
<td style="text-align: right">2.47 GB</td>
</tr>
<tr>
<td style="text-align: right">2048</td>
<td style="text-align: right">80</td>
<td style="text-align: right">2.16 GB</td>
</tr>
<tr>
<td style="text-align: right">2048</td>
<td style="text-align: right">90</td>
<td style="text-align: right">1.92 GB</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">100</td>
<td style="text-align: right">1.86 GB</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">70</td>
<td style="text-align: right">2.61 GB</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">80</td>
<td style="text-align: right">2.28 GB</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">90</td>
<td style="text-align: right">2.03 GB</td>
</tr>
<tr>
<td style="text-align: right">4096</td>
<td style="text-align: right">100</td>
<td style="text-align: right">1.73 GB</td>
</tr>
<tr>
<td style="text-align: right">4096</td>
<td style="text-align: right">70</td>
<td style="text-align: right">2.46 GB</td>
</tr>
<tr>
<td style="text-align: right">4096</td>
<td style="text-align: right">80</td>
<td style="text-align: right">2.15 GB</td>
</tr>
<tr>
<td style="text-align: right">4096</td>
<td style="text-align: right">90</td>
<td style="text-align: right">1.91 GB</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">100</td>
<td style="text-align: right">1.79 GB</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">70</td>
<td style="text-align: right">2.53 GB</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">80</td>
<td style="text-align: right">2.21 GB</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">90</td>
<td style="text-align: right">1.96 GB</td>
</tr>
<tr>
<td style="text-align: right">64</td>
<td style="text-align: right">100</td>
<td style="text-align: right">2.48 GB</td>
</tr>
<tr>
<td style="text-align: right">64</td>
<td style="text-align: right">70</td>
<td style="text-align: right">3.33 GB</td>
</tr>
<tr>
<td style="text-align: right">64</td>
<td style="text-align: right">80</td>
<td style="text-align: right">2.96 GB</td>
</tr>
<tr>
<td style="text-align: right">64</td>
<td style="text-align: right">90</td>
<td style="text-align: right">2.69 GB</td>
</tr>
</tbody>
</table>

<h4 id="toc_44">running on data in /dev/shm/genome/probes/1</h4>

<table>
<thead>
<tr>
<th style="text-align: right">page size (bytes)</th>
<th style="text-align: right">load capacity</th>
<th style="text-align: right">file size</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">100</td>
<td style="text-align: right">1.79 GB</td>
</tr>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">70</td>
<td style="text-align: right">2.55 GB</td>
</tr>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">80</td>
<td style="text-align: right">2.23 GB</td>
</tr>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">90</td>
<td style="text-align: right">1.98 GB</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">100</td>
<td style="text-align: right">2.05 GB</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">70</td>
<td style="text-align: right">2.87 GB</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">80</td>
<td style="text-align: right">2.51 GB</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">90</td>
<td style="text-align: right">2.24 GB</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">100</td>
<td style="text-align: right">1.9 GB</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">70</td>
<td style="text-align: right">2.67 GB</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">80</td>
<td style="text-align: right">2.34 GB</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">90</td>
<td style="text-align: right">2.08 GB</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">100</td>
<td style="text-align: right">1.83 GB</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">70</td>
<td style="text-align: right">2.59 GB</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">80</td>
<td style="text-align: right">2.26 GB</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">90</td>
<td style="text-align: right">2.01 GB</td>
</tr>
<tr>
<td style="text-align: right">64</td>
<td style="text-align: right">100</td>
<td style="text-align: right">2.54 GB</td>
</tr>
<tr>
<td style="text-align: right">64</td>
<td style="text-align: right">70</td>
<td style="text-align: right">3.41 GB</td>
</tr>
<tr>
<td style="text-align: right">64</td>
<td style="text-align: right">80</td>
<td style="text-align: right">3.03 GB</td>
</tr>
<tr>
<td style="text-align: right">64</td>
<td style="text-align: right">90</td>
<td style="text-align: right">2.75 GB</td>
</tr>
</tbody>
</table>

<h4 id="toc_45">running on data in /dev/shm/genome/probes/2</h4>

<table>
<thead>
<tr>
<th style="text-align: right">page size (bytes)</th>
<th style="text-align: right">load capacity</th>
<th style="text-align: right">file size</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">100</td>
<td style="text-align: right">1.8 GB</td>
</tr>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">70</td>
<td style="text-align: right">2.55 GB</td>
</tr>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">80</td>
<td style="text-align: right">2.23 GB</td>
</tr>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">90</td>
<td style="text-align: right">1.98 GB</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">100</td>
<td style="text-align: right">2.05 GB</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">70</td>
<td style="text-align: right">2.87 GB</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">80</td>
<td style="text-align: right">2.51 GB</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">90</td>
<td style="text-align: right">2.24 GB</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">100</td>
<td style="text-align: right">1.9 GB</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">70</td>
<td style="text-align: right">2.67 GB</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">80</td>
<td style="text-align: right">2.34 GB</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">90</td>
<td style="text-align: right">2.08 GB</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">100</td>
<td style="text-align: right">1.83 GB</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">70</td>
<td style="text-align: right">2.59 GB</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">80</td>
<td style="text-align: right">2.26 GB</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">90</td>
<td style="text-align: right">2.01 GB</td>
</tr>
</tbody>
</table>

<h3 id="toc_46">Hash Index Build Time</h3>

<p>Large page size and high load capacity correlates with a shorter index build time. Building a hash index is moderately faster than building a btree index as seen from the build times of both hash and btree indices.</p>

<h4 id="toc_47">running on data in /dev/shm/genome/probes/0</h4>

<table>
<thead>
<tr>
<th style="text-align: right">page size</th>
<th style="text-align: right">load capacity</th>
<th style="text-align: right">build time (ms)</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">100</td>
<td style="text-align: right">171389.135136</td>
</tr>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">70</td>
<td style="text-align: right">223710.145579</td>
</tr>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">80</td>
<td style="text-align: right">168161.630477</td>
</tr>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">90</td>
<td style="text-align: right">166776.003406</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">100</td>
<td style="text-align: right">234563.707079</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">70</td>
<td style="text-align: right">289828.123695</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">80</td>
<td style="text-align: right">236725.524979</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">90</td>
<td style="text-align: right">235922.372648</td>
</tr>
<tr>
<td style="text-align: right">2048</td>
<td style="text-align: right">100</td>
<td style="text-align: right">167470.062586</td>
</tr>
<tr>
<td style="text-align: right">2048</td>
<td style="text-align: right">70</td>
<td style="text-align: right">202760.919218</td>
</tr>
<tr>
<td style="text-align: right">2048</td>
<td style="text-align: right">80</td>
<td style="text-align: right">176125.10483</td>
</tr>
<tr>
<td style="text-align: right">2048</td>
<td style="text-align: right">90</td>
<td style="text-align: right">162039.708698</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">100</td>
<td style="text-align: right">200483.511471</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">70</td>
<td style="text-align: right">221573.838233</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">80</td>
<td style="text-align: right">207636.302969</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">90</td>
<td style="text-align: right">203757.940441</td>
</tr>
<tr>
<td style="text-align: right">4096</td>
<td style="text-align: right">100</td>
<td style="text-align: right">160234.395502</td>
</tr>
<tr>
<td style="text-align: right">4096</td>
<td style="text-align: right">70</td>
<td style="text-align: right">164579.079287</td>
</tr>
<tr>
<td style="text-align: right">4096</td>
<td style="text-align: right">80</td>
<td style="text-align: right">158014.133829</td>
</tr>
<tr>
<td style="text-align: right">4096</td>
<td style="text-align: right">90</td>
<td style="text-align: right">160892.606469</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">100</td>
<td style="text-align: right">181270.80125</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">70</td>
<td style="text-align: right">191675.995715</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">80</td>
<td style="text-align: right">179316.751932</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">90</td>
<td style="text-align: right">180707.174209</td>
</tr>
<tr>
<td style="text-align: right">64</td>
<td style="text-align: right">70</td>
<td style="text-align: right">347764.071148</td>
</tr>
<tr>
<td style="text-align: right">64</td>
<td style="text-align: right">80</td>
<td style="text-align: right">315848.490653</td>
</tr>
<tr>
<td style="text-align: right">64</td>
<td style="text-align: right">90</td>
<td style="text-align: right">322349.01136</td>
</tr>
</tbody>
</table>

<h4 id="toc_48">running on data in /dev/shm/genome/probes/1</h4>

<table>
<thead>
<tr>
<th style="text-align: right">page size</th>
<th style="text-align: right">load capacity</th>
<th style="text-align: right">build time (ms)</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">100</td>
<td style="text-align: right">169212.891371</td>
</tr>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">70</td>
<td style="text-align: right">170016.062537</td>
</tr>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">80</td>
<td style="text-align: right">162829.003763</td>
</tr>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">90</td>
<td style="text-align: right">177309.245472</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">100</td>
<td style="text-align: right">222264.495195</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">70</td>
<td style="text-align: right">247171.878918</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">80</td>
<td style="text-align: right">232301.465799</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">90</td>
<td style="text-align: right">238997.341209</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">100</td>
<td style="text-align: right">192225.984272</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">70</td>
<td style="text-align: right">202073.177647</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">80</td>
<td style="text-align: right">208734.958637</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">90</td>
<td style="text-align: right">207179.320846</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">100</td>
<td style="text-align: right">179182.509888</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">70</td>
<td style="text-align: right">188705.391672</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">80</td>
<td style="text-align: right">178942.686694</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">90</td>
<td style="text-align: right">183014.701338</td>
</tr>
<tr>
<td style="text-align: right">64</td>
<td style="text-align: right">100</td>
<td style="text-align: right">308592.543915</td>
</tr>
<tr>
<td style="text-align: right">64</td>
<td style="text-align: right">70</td>
<td style="text-align: right">251495.116857</td>
</tr>
<tr>
<td style="text-align: right">64</td>
<td style="text-align: right">80</td>
<td style="text-align: right">249108.102207</td>
</tr>
<tr>
<td style="text-align: right">64</td>
<td style="text-align: right">90</td>
<td style="text-align: right">267156.510625</td>
</tr>
</tbody>
</table>

<h4 id="toc_49">running on data in /dev/shm/genome/probes/2</h4>

<table>
<thead>
<tr>
<th style="text-align: right">page size</th>
<th style="text-align: right">load capacity</th>
<th style="text-align: right">build time (ms)</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">100</td>
<td style="text-align: right">166695.284624</td>
</tr>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">70</td>
<td style="text-align: right">171969.419878</td>
</tr>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">80</td>
<td style="text-align: right">171068.201793</td>
</tr>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">90</td>
<td style="text-align: right">165339.598203</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">100</td>
<td style="text-align: right">217734.888551</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">70</td>
<td style="text-align: right">224562.107108</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">80</td>
<td style="text-align: right">216592.967218</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">90</td>
<td style="text-align: right">213045.054758</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">100</td>
<td style="text-align: right">201341.027593</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">70</td>
<td style="text-align: right">194945.271324</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">80</td>
<td style="text-align: right">214449.548223</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">90</td>
<td style="text-align: right">191886.920873</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">100</td>
<td style="text-align: right">178424.062664</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">70</td>
<td style="text-align: right">182022.679635</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">80</td>
<td style="text-align: right">180544.243822</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">90</td>
<td style="text-align: right">174793.360486</td>
</tr>
</tbody>
</table>

<h3 id="toc_50">Performance of Hash Index Probe</h3>

<p>For the first data set <code>/0/</code>, hash index with page size of 512B and load capacity of 70 yields the fastest average probe time. hash index with page size of 256B and load capacity of 90 yields the second fastest average probe time. Hash index with page size of 512B and load capacity of 100 yields the third fastest average probe time. </p>

<p>For the second data set <code>/1/</code>, hash index with page size of 512B and load capacity of 70 yields the fastest average probe time. Hash index with page size of 1024B and load capacity of 70 yields the second fastest average probe time. Hash index with page size of 512B and load capacity of 80 yields the third fastest average probe time. </p>

<p>For the third data set <code>/2/</code>, hash index with page size of 128B and load capacity of 70 yields the fastest average probe time. Hash index with page size of 256B and load capacity of 100 yields the second fastest average probe time. Hash index with page size of 256B and load capacity of 80 yields the third fastest average probe time. </p>

<p>Overall, page sizes larger than 1048B and page sizes smaller than 128B do not perform as well as pages that are within [128B, 1048B]. There is no one page size that performs consistently the best across probes on three data sets. However, hash index with page size of 512B and load capacity of 70 performs above average in comparison to other hash indices. Even though the second data set have a significantly higher number of unsuccessful probes (probing on key not found in index), there is no significantly change in the speed of probe. Thus, hash indices perform equally well for a successful and an unsuccessful probe. </p>

<h4 id="toc_51">running on data in /dev/shm/genome/probes/0</h4>

<table>
<thead>
<tr>
<th style="text-align: right">page size</th>
<th style="text-align: right">load capacity</th>
<th style="text-align: right">total probes</th>
<th style="text-align: right">average probe time (ns)</th>
<th style="text-align: right">total probe time (s)</th>
<th style="text-align: right">num of successful probe</th>
<th style="text-align: right">num of unsuccessful probe</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">100</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1857</td>
<td style="text-align: right">1079.49</td>
<td style="text-align: right">581018721</td>
<td style="text-align: right">204886</td>
</tr>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">70</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1316</td>
<td style="text-align: right">765.09</td>
<td style="text-align: right">581018721</td>
<td style="text-align: right">204886</td>
</tr>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">80</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">2113</td>
<td style="text-align: right">1228.44</td>
<td style="text-align: right">581018721</td>
<td style="text-align: right">204886</td>
</tr>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">90</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1908</td>
<td style="text-align: right">110.92</td>
<td style="text-align: right">581018721</td>
<td style="text-align: right">204886</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">70</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1527</td>
<td style="text-align: right">888.065</td>
<td style="text-align: right">581018721</td>
<td style="text-align: right">204886</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">80</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1535</td>
<td style="text-align: right">892.44</td>
<td style="text-align: right">581018721</td>
<td style="text-align: right">204886</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">90</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1623</td>
<td style="text-align: right">943.55</td>
<td style="text-align: right">581018721</td>
<td style="text-align: right">204886</td>
</tr>
<tr>
<td style="text-align: right">2048</td>
<td style="text-align: right">100</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">2564</td>
<td style="text-align: right">1490.75</td>
<td style="text-align: right">581018721</td>
<td style="text-align: right">204886</td>
</tr>
<tr>
<td style="text-align: right">2048</td>
<td style="text-align: right">70</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">2361</td>
<td style="text-align: right">1372.65</td>
<td style="text-align: right">581018721</td>
<td style="text-align: right">204886</td>
</tr>
<tr>
<td style="text-align: right">2048</td>
<td style="text-align: right">80</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">2398</td>
<td style="text-align: right">1394.05</td>
<td style="text-align: right">581018721</td>
<td style="text-align: right">204886</td>
</tr>
<tr>
<td style="text-align: right">2048</td>
<td style="text-align: right">90</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">2026</td>
<td style="text-align: right">1177.88</td>
<td style="text-align: right">581018721</td>
<td style="text-align: right">204886</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">100</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1643</td>
<td style="text-align: right">955.32</td>
<td style="text-align: right">581018721</td>
<td style="text-align: right">204886</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">70</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1622</td>
<td style="text-align: right">942.89</td>
<td style="text-align: right">581018721</td>
<td style="text-align: right">204886</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">80</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1403</td>
<td style="text-align: right">815.49</td>
<td style="text-align: right">581018721</td>
<td style="text-align: right">204886</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">90</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1187</td>
<td style="text-align: right">690.28</td>
<td style="text-align: right">581018721</td>
<td style="text-align: right">204886</td>
</tr>
<tr>
<td style="text-align: right">4096</td>
<td style="text-align: right">100</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1763</td>
<td style="text-align: right">1025.03</td>
<td style="text-align: right">581018721</td>
<td style="text-align: right">204886</td>
</tr>
<tr>
<td style="text-align: right">4096</td>
<td style="text-align: right">70</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">2551</td>
<td style="text-align: right">1482.82</td>
<td style="text-align: right">581018721</td>
<td style="text-align: right">204886</td>
</tr>
<tr>
<td style="text-align: right">4096</td>
<td style="text-align: right">80</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">2969</td>
<td style="text-align: right">1726.14</td>
<td style="text-align: right">581018721</td>
<td style="text-align: right">204886</td>
</tr>
<tr>
<td style="text-align: right">4096</td>
<td style="text-align: right">90</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">2876</td>
<td style="text-align: right">1671.77</td>
<td style="text-align: right">581018721</td>
<td style="text-align: right">204886</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">100</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1270</td>
<td style="text-align: right">738.58</td>
<td style="text-align: right">581018721</td>
<td style="text-align: right">204886</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">70</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1184</td>
<td style="text-align: right">688.63</td>
<td style="text-align: right">581018721</td>
<td style="text-align: right">204886</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">80</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1532</td>
<td style="text-align: right">890.55</td>
<td style="text-align: right">581018721</td>
<td style="text-align: right">204886</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">90</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1904</td>
<td style="text-align: right">110.68</td>
<td style="text-align: right">581018721</td>
<td style="text-align: right">204886</td>
</tr>
<tr>
<td style="text-align: right">64</td>
<td style="text-align: right">100</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1678</td>
<td style="text-align: right">975.50</td>
<td style="text-align: right">581018721</td>
<td style="text-align: right">204886</td>
</tr>
<tr>
<td style="text-align: right">64</td>
<td style="text-align: right">70</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1458</td>
<td style="text-align: right">847.86</td>
<td style="text-align: right">581018721</td>
<td style="text-align: right">204886</td>
</tr>
<tr>
<td style="text-align: right">64</td>
<td style="text-align: right">80</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1334</td>
<td style="text-align: right">775.88</td>
<td style="text-align: right">581018721</td>
<td style="text-align: right">204886</td>
</tr>
<tr>
<td style="text-align: right">64</td>
<td style="text-align: right">90</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1615</td>
<td style="text-align: right">938.93</td>
<td style="text-align: right">581018721</td>
<td style="text-align: right">204886</td>
</tr>
</tbody>
</table>

<h4 id="toc_52">running on data in /dev/shm/genome/probes/1</h4>

<table>
<thead>
<tr>
<th style="text-align: right">page size</th>
<th style="text-align: right">load capacity</th>
<th style="text-align: right">total probes</th>
<th style="text-align: right">average probe time (ns)</th>
<th style="text-align: right">total probe time (s)</th>
<th style="text-align: right">num of successful probe</th>
<th style="text-align: right">num of unsuccessful probe</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">100</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1970</td>
<td style="text-align: right">1145.42</td>
<td style="text-align: right">521002767</td>
<td style="text-align: right">60220840</td>
</tr>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">70</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1285</td>
<td style="text-align: right">746.95</td>
<td style="text-align: right">521002767</td>
<td style="text-align: right">60220840</td>
</tr>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">80</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1939</td>
<td style="text-align: right">1127.19</td>
<td style="text-align: right">521002767</td>
<td style="text-align: right">60220840</td>
</tr>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">90</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1954</td>
<td style="text-align: right">1135.75</td>
<td style="text-align: right">521002767</td>
<td style="text-align: right">60220840</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">100</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1599</td>
<td style="text-align: right">929.91</td>
<td style="text-align: right">521002767</td>
<td style="text-align: right">60220840</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">70</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1479</td>
<td style="text-align: right">859.97</td>
<td style="text-align: right">521002767</td>
<td style="text-align: right">60220840</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">80</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1574</td>
<td style="text-align: right">915.05</td>
<td style="text-align: right">521002767</td>
<td style="text-align: right">60220840</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">90</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1562</td>
<td style="text-align: right">908.21</td>
<td style="text-align: right">521002767</td>
<td style="text-align: right">60220840</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">100</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1679</td>
<td style="text-align: right">976.35</td>
<td style="text-align: right">521002767</td>
<td style="text-align: right">60220840</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">90</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1464</td>
<td style="text-align: right">851.38</td>
<td style="text-align: right">521002767</td>
<td style="text-align: right">60220840</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">100</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1445</td>
<td style="text-align: right">840.24</td>
<td style="text-align: right">521002767</td>
<td style="text-align: right">60220840</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">70</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1199</td>
<td style="text-align: right">697.16</td>
<td style="text-align: right">521002767</td>
<td style="text-align: right">60220840</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">80</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1303</td>
<td style="text-align: right">757.69</td>
<td style="text-align: right">521002767</td>
<td style="text-align: right">60220840</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">90</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1855</td>
<td style="text-align: right">1078.25</td>
<td style="text-align: right">521002767</td>
<td style="text-align: right">60220840</td>
</tr>
<tr>
<td style="text-align: right">64</td>
<td style="text-align: right">100</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1327</td>
<td style="text-align: right">771.85</td>
<td style="text-align: right">521002767</td>
<td style="text-align: right">60220840</td>
</tr>
<tr>
<td style="text-align: right">64</td>
<td style="text-align: right">70</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1634</td>
<td style="text-align: right">950.28</td>
<td style="text-align: right">521002767</td>
<td style="text-align: right">60220840</td>
</tr>
<tr>
<td style="text-align: right">64</td>
<td style="text-align: right">80</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1375</td>
<td style="text-align: right">799.31</td>
<td style="text-align: right">521002767</td>
<td style="text-align: right">60220840</td>
</tr>
<tr>
<td style="text-align: right">64</td>
<td style="text-align: right">90</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1568</td>
<td style="text-align: right">911.64</td>
<td style="text-align: right">521002767</td>
<td style="text-align: right">60220840</td>
</tr>
</tbody>
</table>

<h4 id="toc_53">running on data in /dev/shm/genome/probes/2</h4>

<table>
<thead>
<tr>
<th style="text-align: right">page size</th>
<th style="text-align: right">load capacity</th>
<th style="text-align: right">total probes</th>
<th style="text-align: right">average probe time (ns)</th>
<th style="text-align: right">total probe time (s)</th>
<th style="text-align: right">num of successful probe</th>
<th style="text-align: right">num of unsuccessful probe</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">100</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">2250</td>
<td style="text-align: right">1308.24</td>
<td style="text-align: right">581078110</td>
<td style="text-align: right">145497</td>
</tr>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">70</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">2068</td>
<td style="text-align: right">1202.24</td>
<td style="text-align: right">581078110</td>
<td style="text-align: right">145497</td>
</tr>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">80</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">2165</td>
<td style="text-align: right">1258.79</td>
<td style="text-align: right">581078110</td>
<td style="text-align: right">145497</td>
</tr>
<tr>
<td style="text-align: right">1024</td>
<td style="text-align: right">90</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">2043</td>
<td style="text-align: right">1187.81</td>
<td style="text-align: right">581078110</td>
<td style="text-align: right">145497</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">100</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1584</td>
<td style="text-align: right">921.09</td>
<td style="text-align: right">581078110</td>
<td style="text-align: right">145497</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">70</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1065</td>
<td style="text-align: right">619.51</td>
<td style="text-align: right">581078110</td>
<td style="text-align: right">145497</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">80</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1529</td>
<td style="text-align: right">888.95</td>
<td style="text-align: right">581078110</td>
<td style="text-align: right">145497</td>
</tr>
<tr>
<td style="text-align: right">128</td>
<td style="text-align: right">90</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1639</td>
<td style="text-align: right">953.08</td>
<td style="text-align: right">581078110</td>
<td style="text-align: right">145497</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">100</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1124</td>
<td style="text-align: right">653.62</td>
<td style="text-align: right">581078110</td>
<td style="text-align: right">145497</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">70</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1473</td>
<td style="text-align: right">856.30</td>
<td style="text-align: right">581078110</td>
<td style="text-align: right">145497</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">80</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1246</td>
<td style="text-align: right">724.42</td>
<td style="text-align: right">581078110</td>
<td style="text-align: right">145497</td>
</tr>
<tr>
<td style="text-align: right">256</td>
<td style="text-align: right">90</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1502</td>
<td style="text-align: right">873.53</td>
<td style="text-align: right">581078110</td>
<td style="text-align: right">145497</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">100</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1878</td>
<td style="text-align: right">1091.65</td>
<td style="text-align: right">581078110</td>
<td style="text-align: right">145497</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">70</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1924</td>
<td style="text-align: right">1118.85</td>
<td style="text-align: right">581078110</td>
<td style="text-align: right">145497</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">80</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">2047</td>
<td style="text-align: right">1190.21</td>
<td style="text-align: right">581078110</td>
<td style="text-align: right">145497</td>
</tr>
<tr>
<td style="text-align: right">512</td>
<td style="text-align: right">90</td>
<td style="text-align: right">581223607</td>
<td style="text-align: right">1929</td>
<td style="text-align: right">1121.36</td>
<td style="text-align: right">581078110</td>
<td style="text-align: right">145497</td>
</tr>
</tbody>
</table>

<h2 id="toc_54">Ingatan Stats</h2>

<ul>
<li>Processor model name: Intel(R) Xeon(R) CPU E5-4620 0 @ 2.20GHz</li>
<li>Architecture:          x86_64</li>
<li>CPU(s):                64</li>
<li>L1d cache:             32K</li>
<li>L1i cache:             32K</li>
<li>L2 cache:              256K</li>
<li>L3 cache:              16384K</li>
<li>MemTotal:       528359424 kB</li>
</ul>

<h2 id="toc_55">Conclusion</h2>

<p>Btree indices (~4MB), on average, are 500 times smaller than hash indices (~2GB) because not all entries in data.idx are in the leaf nodes of the btree index. Instead, btree index only stores keys whose rids are every 4K apart in its leaf. On the other hand, hash indices must store all (key, rid) pairs provided in data.idx file. On the other hand, a btree index probe (~10ms) is 10 times slower than a hash index probe (~1ms). Probing a key that is not in the index is shown to be slower when doing a btree probe, whereas the existence of key in the index does not impact the probe speed in the hash index.</p>




<!-- link to mermaid js -->
<script src="/Volumes/data/archive/tools/mermaid-macdown/mermaid.min.js"></script>
<script>
alert('h');
!function(){
  var uml,containerElement,
    umlElement=document.querySelector(".language-mermaid-uml");
  while(umlElement){
    uml=umlElement.innerHTML;
    containerElement = umlElement.parentNode.parentNode;
    containerElement.className = "mermaid";
    containerElement.innerHTML=uml;
    umlElement=document.querySelector(".language-mermaid-uml");
  }
}();
mermaid.initialize({startOnLoad:true});
/** 
 *  use `mermaid-uml` as codeblock language.
 *  eg:
 *  ```mermaid-uml
 *  graph TD;
 *  A-->B;
 *  A-->C;
 *  B-->D;
 *  C-->D;
 *  ```
 *  
 *  ```mermaid-uml
 *  sequenceDiagram
 *  participant Alice
 *  Alice->John: Hello John, how are you?
 *  ```
 */
</script>
</body>

</html>
